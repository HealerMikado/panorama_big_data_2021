<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>1-lesson-1.4-what-if.knit</title>
    <meta charset="utf-8" />
    <meta name="author" content="Arthur Katossky &amp; Rémi Pépin" />
    <script src="1-lesson-1.4-what-if_files/header-attrs-2.19/header-attrs.js"></script>
    <link rel="stylesheet" href="css/xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="css/mine.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# <div class="line-block">Introduction to Big Data<br />
Lesson 1.4 What if … ?</div>
]
.author[
### Arthur Katossky &amp; Rémi Pépin
]
.date[
### Tuesday, March 29, 2023
]

---




## What if ... ?

--
&gt; Jane is a data analyst at Acme Corporation, a large online retailer.
&gt; 
&gt; She needs to build a model to predict which customers are most likely to make a purchase in the next month so they can target them with personalized marketing campaigns. She thinks of a standard linear regression however the purchase data weighs 2To and is too large to fit in memory on her computer (16GB of RAM) or on the company's server (500 Go of RAM).

.footnote[Example adapted form suggestion by GPT-3.5.]

???

We have to distinguish between estimation of a statistical model (always the same call, happen seldom, often only once or twice), developement/research (many requests, often very different from each other) and model in production, for instance for prediction (usually lighter computations, but happen possibly very often). It is rare to be in the case where you both want a very intense computation and you wan to perform it often, exceptions being for instance 3D rendering.

---

## What if data is too big to fit in memory ?

.pull-right[![](https://www.flaticon.com/free-icons/question-mark)]

--
1. Buy more / bigger memory cards&lt;/br&gt;
--
Easy but expensive. Not the best solution

--
2. Do less (filter, select, sample) &lt;/br&gt;
--
Do you really need all this data ? Can statistic help you ?

--
3. Do things in chunks / stream &lt;/br&gt;
--
Need to rethink the process. Or to use exotic libraries.

--
4. Rent one virtual machine in the cloud&lt;/br&gt;
--
Need to store the data at the same service provider.

--
5. Use a computing service&lt;/br&gt;
--
For simple uses (exploratory statistics, mainstream ML), cloud providers have your back

---

## What if ... ?

&gt; Sarah works at Global Logistics Inc., a transportation company. There, she analyzes GPS data from the company's fleet of vehicles to optimize routes and fuel consumption.
&gt;
&gt; The data is stored on a dedicated server, where each new datum is appended to a gigantic text file. Some day, Sarah faces a single 5 Go file, but her workstation runs under Windows with FAT32 file system and she cannot open it anymore. When she borrows her manager's computer and tries to open the file from the file explorer, it takes 15 minutes just to open and the whole operating system is slowed down.

---

## What if your file is too big for your local file system ?

.pull-right[![](https://image.flaticon.com/icons/png/512/906/906794.png)]

--
1. Update file system &lt;/br&gt;
&lt;small&gt;No more FAT32&lt;/small&gt;

--
2. Import less data (filter, select, sample)&lt;/br&gt;
&lt;small&gt;For a small experimentation, you don't need 2To of data&lt;/small&gt;

--
3. Cut file into pieces and process in chunks&lt;br&gt;
&lt;small&gt;For instance 1 file per day&lt;br&gt;(many data formats are text under the hood)&lt;/small&gt;

--
4. If your data are structured, even so slightly, move to a database&lt;/br&gt;
&lt;small&gt;That's what databases are made for&lt;/small&gt;

--
5. Rent a remote cloud-based service, they will abstract the problem away from you&lt;/br&gt;
&lt;small&gt;Like AWS S3, Azure Bloc Blobs, GCP Storage&lt;/small&gt;

???

Sometimes you don't have the choice. You get data you have to read before you can filter.

---

## What if your file is too big for your local file system ?

![](img/cloud/limit-size-aws.png)

---

## What if your file is too big for your local file system ?

![](img/cloud/limit-size-azure.png)

---

## What if your file is too big for your local file system ?

![](img/cloud/limit-size-gcp.png)

---

## What if ... ?

&gt; Kim is data scientist at West Coast Energy. The company is launching a new project where they plan to analyse satellite imagery to identify potential locations for new wind farms.
&gt; 
&gt; The high-resolution imagery covers a large area and generates huge amounts of data that cannot be stored on an average desktop computer.

---

## What if data is too big to fit on disk ?

.pull-right[![](https://image.flaticon.com/icons/png/512/906/906794.png)]

--
1. Store less (filter, select, sample) &lt;br&gt;
&lt;small&gt;Especially for exploratory projects&lt;/small&gt;

--
2. Buy bigger physical disk &lt;br&gt;
&lt;small&gt;(Easier on desktops)&lt;/small&gt;

--
3. Buy your own storage server&lt;br&gt;
&lt;small&gt;Distribution is transparent. Local replication possible.&lt;/small&gt;

--
4. Rent storage space (file space or database) in the cloud&lt;br&gt;
&lt;small&gt;It is transparently distributed and replicated over a cluster&lt;br&gt;but there are privacy or sovereignty concerns!&lt;/small&gt;

--
5. Distribute data on an organisation-hosted cluster&lt;br&gt;
&lt;small&gt;Quite technical. Local replication possible.&lt;/small&gt;

???

Database may be helpful, but won't solve the issue of not enough space on the disk.

---

## What if ... ?

&gt; Amin works at an Environmental research organization called Noah's Ark. The organisation is running simulations of climate models to predict future climate patterns and identify potential areas of concern for conservation efforts.
&gt;
&gt; The models are borrowed from a preliminary project from a partner university and have a manageable size (a few GB) but executing just one simulation at a low resolution, on a regional scale and in the short run already takes days on Amin's laptop (32 GB of RAM). However, his manager asked for multiple variants based on the IPCC latest scenarii.

---

## What if computation takes ages ?

--
1. Do less: filter, select, sample&lt;br&gt;&lt;small&gt;Especially in development stages&lt;br&gt;Processing is the most costly aspect of statistics in production&lt;br&gt;... both in dollars and environmentally-speaking&lt;/small&gt;

--
4. Profile your code&lt;br&gt;&lt;small&gt;How does it scale ? Where are the bottlenecks?&lt;br&gt;Then focus on these parts&lt;/small&gt;

--
2. Do less: less tests, less formatting

--
2. Use parallelism locally&lt;br&gt;&lt;small&gt;Works on both CPUs and GPUs&lt;/small&gt;

--
3. Go low-level: compile, use C or C++, use command shells ... or build chips!

---

## What if computation takes ages ?

6\. Buy processors with faster or more cores


--
7\. Move computation closer to the data source in a first stage and use the ouputs for final computation&lt;br&gt;&lt;small&gt;This redirects the computation load towards the data source&lt;/small&gt;


--
8\. Rent low-level infrastructure (virtual machines) or high-level computing service (such AWS SageMaker) over the cloud &lt;br&gt;&lt;small&gt;Same privacy or sovereignty concerns as before&lt;/small&gt;


--
9\. Avoid i/o or network operations


--
10\. Use a supercomputer, a grid or a cluster&lt;br&gt;&lt;small&gt;Developing your own cluster solution may be quite challenging&lt;br&gt;... using one less so&lt;/small&gt;

---

## What if ... ?

---

## What if computation / storage is too expensive ?

--
1. Store or compute less (filter, select, sample)

--
2. Consider cloud computing&lt;br&gt;&lt;small&gt;Not always cheaper, though!&lt;/small&gt;

--
3. Be careful with databases requests&lt;br&gt;&lt;small&gt;(When you pay on read)&lt;/small&gt;

--
4. Go from RAM (expensive) to disk (cheap)

--
5. Use smaller but more computing units&lt;br&gt;&lt;small&gt;Scientific grids, edge computing, fog computing, etc.&lt;br&gt;Technically challenging&lt;/small&gt;

???

4. stream, caveat: more communication between disk and memory

---

## What if ... ?

---

## What if data i/o is too fast ?

1. For computing: pipelining (overlapping chunk processing), stream (never-ending one-by-one processing)

--
2. For storage: fast databases

---

## What if ... ?

---

## What if data i/o is too varied ?

--
1. Dedicated file systems and databases

This is ultimately not a computation issue.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightLines": null,
"ratio": "16:10",
"scroll": false,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
